---
import { getIcon } from '../utils/icons';

interface Props {
    item: {
        title: string;
        institution: string;
        period: string;
        description: string;
        place: string;
        mode?: string;
        type: 'job' | 'study';
        technologies?: string[];
    };
}
const { item } = Astro.props;
---
<div class="relative pl-8 border-l-2 border-slate-900 pb-12 last:pb-0 group">
    <div class="absolute -left-[11px] top-2 w-4 h-4 bg-white rounded-full border-2 border-slate-900 box-content group-hover:bg-accent transition-colors"></div>
    
    <div class="flex flex-col sm:flex-row sm:items-baseline sm:justify-between mb-2">
        <div class="flex items-center gap-3">
            {/* Placeholder for logo if we had one, using initials for now */}
            <div class="w-10 h-10 bg-white border-2 border-slate-900 rounded-lg flex items-center justify-center text-sm font-bold text-slate-900 shadow-[2px_2px_0px_0px_rgba(26,26,26,1)]">
                {item.institution.substring(0, 2).toUpperCase()}
            </div>
            <h3 class="text-lg font-bold font-heading text-slate-900">{item.title}</h3>
        </div>
        <span class="text-sm font-bold text-slate-900 bg-accent px-2 py-1 rounded border-2 border-slate-900 shadow-[2px_2px_0px_0px_rgba(26,26,26,1)] mt-2 sm:mt-0">{item.period}</span>
    </div>
    
    <div class="text-base font-bold text-slate-700 mb-3 pl-12">
        {item.institution} <span class="text-slate-500 font-medium text-sm">• {item.place} {item.mode && `• ${item.mode}`}</span>
    </div>

    {item.technologies && item.technologies.length > 0 && (
        <div class="flex flex-wrap gap-2 pl-12 mb-3">
            {item.technologies.map(tech => {
                const icon = getIcon(tech);
                return (
                    <span class="px-2 py-1 bg-white text-slate-900 text-xs font-bold rounded-md flex items-center gap-1 border-2 border-slate-900 shadow-[1px_1px_0px_0px_rgba(26,26,26,1)]">
                        {icon && <span class="w-3 h-3 text-slate-900 [&>svg]:fill-current" set:html={icon.svg} />}
                        {tech}
                    </span>
                );
            })}
        </div>
    )}
    
    <div class="pl-12">
        <p class="text-slate-600 leading-relaxed text-sm sm:text-base mb-4 font-medium">
            {item.description}
        </p>
    </div>
</div>
