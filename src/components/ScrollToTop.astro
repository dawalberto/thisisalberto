---
const { pathname } = Astro.url;

// Check if we are on Home or Career pages
// Home: / or /es or /es/
// Career: /career or /es/career
const isHome = pathname === '/' || pathname === '/es' || pathname === '/es/';
const isCareer = pathname.includes('career');
const shouldRender = isHome || isCareer;
---

{shouldRender && (
    <button
        id="scroll-to-top-btn"
        class="fixed bottom-8 right-8 z-40 p-3 bg-white border-2 border-slate-900 rounded-3xl shadow-[4px_4px_0px_0px_rgba(26,26,26,1)] translate-y-24 opacity-0 transition-all duration-300 hover:-translate-y-1 hover:shadow-[6px_6px_0px_0px_rgba(26,26,26,1)] active:translate-y-0 active:shadow-[2px_2px_0px_0px_rgba(26,26,26,1)] cursor-pointer"
        aria-label="Scroll to top"
    >
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6">
            <path d="m18 15-6-6-6 6"/>
        </svg>
    </button>
)}

<script>
    function setupScrollToTop() {
        const btn = document.getElementById('scroll-to-top-btn');
        if (!btn) return;

        const toggleVisibility = () => {
            const pageHeight = document.documentElement.scrollHeight;
            const threshold = pageHeight / 2;

            if (window.scrollY > threshold) {
                btn.classList.remove('translate-y-24', 'opacity-0');
            } else {
                btn.classList.add('translate-y-24', 'opacity-0');
            }
        };

        // Initial check
        toggleVisibility();

        window.addEventListener('scroll', toggleVisibility);
        
        btn.addEventListener('click', () => {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        });
    }
    
    setupScrollToTop();
    document.addEventListener('astro:page-load', setupScrollToTop);
</script>